<div class="min-vh-100">
  <header class="gradient-bg text-white py-4 shadow-lg">
    <div class="container">
      <div class="d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center">
          <i class="bi bi-mortarboard-fill fs-1 me-3"></i>
          <div>
            <h1 class="mb-0 fw-bold">Institute Management System</h1>
            <p class="mb-0 opacity-75">Manage your educational institutions with ease</p>
          </div>
        </div>
        <div class="pulse">
          <i class="bi bi-building fs-2"></i>
        </div>
      </div>
    </div>
  </header>

  <div class="container my-5">
    <div class="toggle-section fade-in">
      <div class="toggle-buttons">
        <button class="btn btn-lg px-5 py-3" [class.btn-gradient]="showForm" [class.btn-outline-secondary]="!showForm"
          (click)="toggleView('form')">
          <i class="bi bi-plus-circle me-2"></i>
          {{ isEditMode ? 'Edit Institute' : 'Add New Institute' }}
        </button>
        <button class="btn btn-lg px-5 py-3" [class.btn-gradient]="showList" [class.btn-outline-secondary]="!showList"
          (click)="toggleView('list')">
          <i class="bi bi-list-ul me-2"></i>
          View All Institutes
        </button>
      </div>
    </div>

    <div *ngIf="showForm" class="fade-in">
      <div class="card p-4 shadow-lg">
        <div class="card-body">
          <h2 class="gradient-text mb-4">
            <i class="bi bi-pencil-square me-2"></i>
            {{ isEditMode ? 'Edit Institute Details' : 'Add New Institute' }}
          </h2>

          <form [formGroup]="instituteForm" (ngSubmit)="onSubmit()">
            <div class="row g-4">
              <div class="col-md-6">
                <label class="form-label fw-bold">
                  <i class="bi bi-building me-2 text-primary"></i>Institute Name *
                </label>
                <input type="text" class="form-control form-control-lg" formControlName="name"
                  placeholder="Enter institute name" [class.is-invalid]="isFieldInvalid('name')" />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('name')">
                  <span *ngIf="getFormControl('name')?.errors?.['required']">
                    Institute name is required
                  </span>
                  <span *ngIf="getFormControl('name')?.errors?.['minlength']">
                    Name must be at least 3 characters
                  </span>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">
                  <i class="bi bi-person-badge me-2 text-primary"></i>Owner Name *
                </label>
                <input type="text" class="form-control form-control-lg" formControlName="ownerName"
                  placeholder="Enter owner name" [class.is-invalid]="isFieldInvalid('ownerName')" />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('ownerName')">
                  Owner name is required
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">
                  <i class="bi bi-telephone me-2 text-primary"></i>Contact Number *
                </label>
                <input type="text" class="form-control form-control-lg" formControlName="conatctNo"
                  placeholder="10 digit mobile number" maxlength="10"
                  [class.is-invalid]="isFieldInvalid('contactNo')" />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('contactNo')">
                  <span *ngIf="getFormControl('contactNo')?.errors?.['required']">
                    Contact number is required
                  </span>
                  <span *ngIf="getFormControl('contactNo')?.errors?.['pattern']">
                    Enter valid 10 digit number
                  </span>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">
                  <i class="bi bi-envelope me-2 text-primary"></i>Email ID *
                </label>
                <input type="email" class="form-control form-control-lg" formControlName="emailId"
                  placeholder="example@domain.com" [class.is-invalid]="isFieldInvalid('emailId')" />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('emailId')">
                  <span *ngIf="getFormControl('emailId')?.errors?.['required']">
                    Email is required
                  </span>
                  <span *ngIf="getFormControl('emailId')?.errors?.['email']">
                    Enter valid email address
                  </span>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">
                  <i class="bi bi-geo-alt-fill me-2 text-primary"></i>City *
                </label>
                <input type="text" class="form-control form-control-lg" formControlName="city" placeholder="Enter city"
                  [class.is-invalid]="isFieldInvalid('city')" />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('city')">City is required</div>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">
                  <i class="bi bi-map me-2 text-primary"></i>State *
                </label>
                <input type="text" class="form-control form-control-lg" formControlName="state"
                  placeholder="Enter state" [class.is-invalid]="isFieldInvalid('state')" />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('state')">
                  State is required
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">
                  <i class="bi bi-signpost-2 me-2 text-primary"></i>Pincode *
                </label>
                <input type="text" class="form-control form-control-lg" formControlName="pincode"
                  placeholder="6 digit pincode" maxlength="6" [class.is-invalid]="isFieldInvalid('pincode')" />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('pincode')">
                  <span *ngIf="getFormControl('pincode')?.errors?.['required']">
                    Pincode is required
                  </span>
                  <span *ngIf="getFormControl('pincode')?.errors?.['pattern']">
                    Enter valid 6 digit pincode
                  </span>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">
                  <i class="bi bi-geo me-2 text-primary"></i>Location *
                </label>
                <input type="text" class="form-control form-control-lg" formControlName="location"
                  placeholder="Enter location/area" [class.is-invalid]="isFieldInvalid('location')" />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('location')">
                  Location is required
                </div>
              </div>

              <div class="col-md-12">
                <label class="form-label fw-bold">
                  <i class="bi bi-receipt-cutoff me-2 text-primary"></i>GST Number *
                </label>
                <input type="text" class="form-control form-control-lg" formControlName="gstNo"
                  placeholder="15 digit GST number (e.g., 27AABCT1234D1Z5)"
                  [class.is-invalid]="isFieldInvalid('gstNo')" />
                <div class="invalid-feedback" *ngIf="isFieldInvalid('gstNo')">
                  <span *ngIf="getFormControl('gstNo')?.errors?.['required']">
                    GST number is required
                  </span>
                </div>
              </div>
            </div>

            <div class="d-flex gap-3 mt-4">
              <button type="submit" class="btn btn-gradient btn-lg px-5">
                <i class="bi bi-save2 me-2"></i>
                {{ isEditMode ? 'Update' : 'Save' }}
              </button>
              <button type="button" class="btn btn-outline-secondary btn-lg px-5" (click)="cancelEdit()">
                <i class="bi bi-x-circle me-2"></i>
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div *ngIf="showList" class="fade-in">
      <div class="mb-4">
        <h2 class="gradient-text">
          <i class="bi bi-bank2 me-2"></i>
          All Institutes
          <span class="badge-gradient text-dark ms-3">{{ institutes.length }}</span>
        </h2>
      </div>

      <div class="row g-4">
        <div class="col-md-6 col-lg-4" *ngFor="let institute of institutes">
          <div class="card h-100 slide-in">
            <div class="card-header gradient-bg text-white py-3">
              <h5 class="mb-0 fw-bold">
                <i class="bi bi-mortarboard-fill me-2"></i>
                {{ institute.name }}
              </h5>
            </div>
            <div class="card-body">
              <div class="mb-3">
                <p class="mb-2">
                  <i class="bi bi-person-badge text-primary me-2"></i>
                  <strong>Owner:</strong> {{ institute.ownerName }}
                </p>
                <p class="mb-2">
                  <i class="bi bi-telephone text-success me-2"></i>
                  <strong>Contact:</strong> {{ institute.conatctNo }}
                </p>
                <p class="mb-2">
                  <i class="bi bi-envelope text-danger me-2"></i>
                  <strong>Email:</strong> {{ institute.emailId }}
                </p>
                <p class="mb-2">
                  <i class="bi bi-geo-alt-fill text-warning me-2"></i>
                  <strong>Location:</strong> {{ institute.location }}, {{ institute.city }}
                </p>
                <p class="mb-2">
                  <i class="bi bi-map text-info me-2"></i>
                  <strong>State:</strong> {{ institute.state }} - {{ institute.pincode }}
                </p>
                <p class="mb-2">
                  <i class="bi bi-receipt-cutoff text-secondary me-2"></i>
                  <strong>GST:</strong> {{ institute.gstNo }}
                </p>
                <p class="mb-0 text-muted">
                  <i class="bi bi-calendar-date me-2"></i>
                  <small>Created: {{ institute.createdDate | date : 'dd MMM yyyy' }}</small>
                </p>
              </div>
            </div>
            <div class="card-footer bg-light">
              <div class="d-flex gap-2">
                <button class="btn btn-sm btn-gradient flex-fill" (click)="editInstitute(institute)">
                  <i class="bi bi-pencil-square me-1"></i>Edit
                </button>
                <button class="btn btn-sm btn-outline-danger flex-fill"
                  (click)="deleteInstitute(institute.instituteId)">
                  <i class="bi bi-trash me-1"></i>Delete
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="institutes.length === 0" class="text-center py-5">
        <i class="bi bi-inboxes fs-1 text-muted mb-3"></i>
        <h3 class="text-muted">No Institutes Found</h3>
        <p class="text-muted">Click "Add New Institute" to create your first institute</p>
      </div>
    </div>
  </div>
</div>